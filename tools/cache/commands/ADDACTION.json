{"parse":{"title":"addAction","pageid":1362,"parsetree":{"*":"<root><template><title>RV</title><part><name>type</name>=<value>command\n\n</value></part><part><name index=\"1\"/><value> arma3\n\n</value></part><part><name index=\"2\"/><value>0.50\n\n</value></part><part><name>arg</name>=<value> global\n\n</value></part><part><name>eff</name>=<value> local\n\n</value></part><part><name>gr1</name>=<value> Interaction\n\n</value></part><part><name index=\"3\"/><value> <template><title>Feature</title><part><name index=\"1\"/><value>arma3 </value></part><part><name index=\"2\"/><value> This command syntax is for <template><title>arma3</title></template> only. For TKOH and older <template><title>arma</title></template> games see [[addAction TKOH]].</value></part></template>\n\nAdds an entry to the action menu of an object (scroll wheel menu). The action can only be activated when in proximity to the object (default 50m) '''and''' look at it. Adding an action to the player makes that action available to the player at all times.&lt;br&gt;\nThe appearance of onscreen text can be further tweaked with [[setUserActionText]]. For event handling of user interaction see [[inGameUISetEventHandler]].\n\n<template lineStart=\"1\"><title>Feature </title><part><name index=\"1\"/><value> Informative </value></part><part><name index=\"2\"/><value> [[addAction]] does not work on [[createAgent|agents]] (including animals) and [[Arma 3 Simple Objects|simple objects]], this is intended behavior.</value></part></template>\n\n</value></part><part><name index=\"4\"/><value> object [[addAction]] [title, script, arguments, priority, showWindow, hideOnUse, shortcut, condition, radius, unconscious, selection, memoryPoint]\n\n</value></part><part><name>p1</name>=<value>\n&lt;dl&gt;\n&lt;dt style=\"clear:none;\"&gt;object:&lt;/dt&gt;\n&lt;dd&gt;[[Object]] - unit, vehicle or static object&lt;/dd&gt;\n\n&lt;dt&gt;title:&lt;/dt&gt;\n&lt;dd&gt;[[String]] - The action name which is displayed in the action menu, may contain [[Structured Text]]. Because of that '''&lt;''' and '''&gt;''' symbols will be interpreted as opening and closing XML tags. To avoid this use &lt;tt&gt;&amp;amp;lt;&lt;/tt&gt; for '''&amp;lt;''' and &lt;tt&gt;&amp;amp;gt;&lt;/tt&gt; for '''&amp;gt;'''. The title text can be changed with [[setUserActionText]]&lt;/dd&gt;\n\n&lt;dt&gt;script:&lt;/dt&gt;\n&lt;dd&gt;[[String]] or [[Code]] - Either path to the script file, relative to the mission folder or string with code or the actual script code. If the string is a path to script file, the script file '''must''' have extension .[[SQS]] or .[[SQF]]. The script, whether it is a file or a code, will run in [[Scheduler#Scheduled Environment|scheduled environment]], i.e. it is ok to use [[sleep]].\n&lt;br&gt;\nParameters array passed to the script upon activation in ''[[Magic Variables#this|_this]]'' variable is:\n<ext><name>syntaxhighlight</name><attr> lang=\"cpp\"</attr><inner>params [\"_target\", \"_caller\", \"_actionId\", \"_arguments\"];</inner><close>&lt;/syntaxhighlight&gt;</close></ext>\n* ''target'' (_this select 0): [[Object]] - the object which the action is assigned to\n* ''caller'' (_this select 1): [[Object]] - the unit that activated the action\n* ''actionId'' (_this select 2): [[Number]] - activated action's ID (same as [[addAction]]'s return value)\n* ''arguments'' (_this select 3): [[Anything]] - arguments given to the script if you are using the extended syntax\n\n&lt;/dd&gt;\n\n&lt;dt&gt;arguments:&lt;/dt&gt;\n&lt;dd&gt;[[Anything]] - (Optional, default [[nil]]) arguments to pass to the script (will be ''_this select 3'' inside the script). If [[Array]] is used as an argument for example, its first element reference would be <template><title>ic</title><part><name index=\"1\"/><value>_this select 3 select 0</value></part></template>&lt;/dd&gt;\n\n&lt;dt&gt;priority:&lt;/dt&gt;\n&lt;dd&gt;[[Number]] - (Optional, default 1.5) priority value of the action. Actions will be arranged in descending order according to this value. Every game action has a preset priority value. Value can be negative or decimal fraction. Actions with same values will be arranged in order which they were made, newest at the bottom. The bigger the number the higher the action will be positioned on the menu. Typical range is 0 (low priority. Eg: 'Get out') to 6 (high priority. Eg: 'Auto-hover on')&lt;/dd&gt;\n\n&lt;dt&gt;showWindow:&lt;/dt&gt;\n&lt;dd&gt;[[Boolean]] - (Optional, default [[true]]) if set to [[true]], players see \"Titletext\" at mid-lower screen, as they approach the object. Only the title text for the action with highest priority and 'showWindow true' will be shown. Setting it to [[false]] disables the feature&lt;/dd&gt;\n\n&lt;dt&gt;hideOnUse:&lt;/dt&gt;\n&lt;dd&gt;[[Boolean]] - (Optional, default [[true]]) if set to [[true]], it will hide the action menu after selecting that action. If set to [[false]], it will leave the action menu open and visible after selecting that action, leaving the same action highlighted, for the purpose of allowing you to reselect that same action quickly, or to select another action&lt;/dd&gt;\n\n&lt;dt&gt;shortcut:&lt;/dt&gt;\n&lt;dd&gt;[[String]] - (Optional, default \"\") one of the [[:Category:Key Actions|key names]] defined in bin.pbo (e.g. \"moveForward\"). Adding available shortcut will bind corresponding keyboard key to this action. Shortcut availability can be tested with [[inputAction]] command&lt;/dd&gt;\n\n&lt;dt&gt;condition:&lt;/dt&gt;\n&lt;dd&gt;[[String]] - (Optional, default \"true\") script code that must return [[true]] for the action to be shown. Special variables passed to the script code are:\n* ''_target'': [[Object]] - the object to which action is attached or, if the object is a unit inside of vehicle, the vehicle\n* ''_this'': [[Object]] - caller person to whom the action is shown (or not shown if ''condition'' returns [[false]])\n* ''_originalTarget'': [[Object]] - the original object to which the action is attached, regardless if the object/unit is in a vehicle or not\n<template lineStart=\"1\"><title>Feature</title><part><name index=\"1\"/><value>important</value></part><part><name index=\"2\"/><value>\n* ''condition'' is evaluated on each frame in [[Scheduler#Unscheduled Environment|non-scheduled environment]].\n* ''condition'' is '''not''' evaluated if a dialog is open.\n* If action is added to an object (and not to [[player]]) ''condition'' will only get evaluated IF player is closer than ~50m to the object surface AND is looking at the object.\n* If action is added to [[player]], ''condition'' is evaluated all the time.</value></part></template>&lt;/dd&gt;\n\n&lt;dt&gt;radius:&lt;/dt&gt;\n&lt;dd&gt;[[Number]] - (Optional, default 50) maximum 3D [[distance]] in meters between the activating unit's [[eyePos]] and the ''object'''s ''memoryPoint'', ''selection'' or [[position]]. -1 disables the radius\n&lt;br&gt;<template><title>Since</title><part><name index=\"1\"/><value>arma3</value></part><part><name index=\"2\"/><value>1.64</value></part><part><name index=\"3\"/><value>y</value></part></template>&lt;/dd&gt;\n\n&lt;dt&gt;unconscious:&lt;/dt&gt;\n&lt;dd&gt;[[Boolean]] - (Optional, default [[false]]) if [[true]] will be shown to incapacitated player (see [[setUnconscious]], [[lifeState]])&lt;br&gt;<template><title>Since</title><part><name index=\"1\"/><value>arma3</value></part><part><name index=\"2\"/><value>1.64</value></part><part><name index=\"3\"/><value>y</value></part></template>&lt;/dd&gt;\n\n&lt;dt&gt;selection:&lt;/dt&gt;\n&lt;dd&gt;[[String]] - (Optional, default \"\") ''object'' Geometry LOD's named selection\n&lt;br&gt;<template><title>Since</title><part><name index=\"1\"/><value>arma3</value></part><part><name index=\"2\"/><value>1.70</value></part><part><name index=\"3\"/><value>y</value></part></template>&lt;/dd&gt;\n\n&lt;dt&gt;memoryPoint:&lt;/dt&gt;\n&lt;dd&gt;[[String]] - (Optional, default \"\") ''object'''s memory point. If ''selection'' is supplied, ''memoryPoint'' is not used\n&lt;br&gt;<template><title>Since</title><part><name index=\"1\"/><value>arma3</value></part><part><name index=\"2\"/><value>1.82</value></part><part><name index=\"3\"/><value>y</value></part></template>&lt;/dd&gt;\n\n&lt;/dl&gt;\n\n</value></part><part><name index=\"5\"/><value> [[Number]] - The added action's ID. Action can be removed with [[removeAction]] (see also [[removeAllActions]]). IDs are incrementing, the first given action to each unit has the ID 0, the second the ID 1, etc. IDs are also passed to the called script (see [[#Syntax|''script'' parameter]])\n\n</value></part><part><name>x1</name>=<value> &lt;code&gt;<template><title>cc</title><part><name index=\"1\"/><value>short and sweet</value></part></template>\n[[player]] [[addAction]] [\"a useless action that does nothing\", {}];\n[[player]] [[addAction]] [\"&lt;t color='#FF0000'&gt;This Useless Action Is RED&lt;/t&gt;\", {[[hint]] \"RED\"}];\n[[player]] [[addAction]] [\"Hint Hello!\", { [[hint]] [[format]] [\"Hello %1!\", [[name]] [[player]]] }];\n[[player]] [[addAction]] [\"String Exec\", \"[[hint]] 'this is also compiled'\"];&lt;/code&gt;\n\n</value></part><part><name>x2</name>=<value> &lt;code&gt;_actionID = [[player]] [[addAction]] [\"Exec the file\", \"scriptFile.sqf\"]&lt;/code&gt;\n'''scriptFile.sqf:'''\n&lt;code&gt;[[hint]] [[str]] [[Magic Variables#this|_this]];&lt;/code&gt;\n\n</value></part><part><name>x3</name>=<value> &lt;code&gt;<template><title>cc</title><part><name index=\"1\"/><value>create object on the server and add action to the object on every client</value></part></template>\n[[if]] ([[isServer]]) [[then]]\n{\n\t[[private]] _object = \"some_obj_class\" [[createVehicle]] [1234, 1234, 0];\n\t[_object, [\"Greetings!\", { [[hint]] \"Hello!\"; }]] [[remoteExec]] [\"addAction\"]; <template><title>cc</title><part><name index=\"1\"/><value>Note: does '''not''' return action id</value></part></template>\n};&lt;/code&gt;\n\n</value></part><part><name>x4</name>=<value> Default parameters:&lt;code&gt;[[Magic Variables#this_2|this]] [[addAction]]\n[\n\t\"title\",\n\t{\n\t\t[[params]] [\"_target\", \"_caller\", \"_actionId\", \"_arguments\"];\n\t},\n\t[[nil]],\n\t1.5,\n\t[[true]],\n\t[[true]],\n\t\"\",\n\t\"[[true]]\", <template><title>cc</title><part><name index=\"1\"/><value>_target, [[Magic Variables#this|_this]], _originalTarget</value></part></template>\n\t50,\n\t[[false]],\n\t\"\",\n\t\"\"\n];&lt;/code&gt;\n\n</value></part><part><name>x5</name>=<value> Default parameters with comments:&lt;code&gt;[[Magic Variables#this_2|this]] [[addAction]]\n[\n\t\"title\",\t<template><title>cc</title><part><name index=\"1\"/><value>title</value></part></template>\n\t{\n\t\t[[params]] [\"_target\", \"_caller\", \"_actionId\", \"_arguments\"]; <template><title>cc</title><part><name index=\"1\"/><value>script</value></part></template>\n\t},\n\t[[nil]],\t\t<template><title>cc</title><part><name index=\"1\"/><value>arguments</value></part></template>\n\t1.5,\t\t<template><title>cc</title><part><name index=\"1\"/><value>priority</value></part></template>\n\t[[true]],\t\t<template><title>cc</title><part><name index=\"1\"/><value>showWindow</value></part></template>\n\t[[true]],\t\t<template><title>cc</title><part><name index=\"1\"/><value>hideOnUse</value></part></template>\n\t\"\",\t\t\t<template><title>cc</title><part><name index=\"1\"/><value>shortcut</value></part></template>\n\t\"[[true]]\", \t<template><title>cc</title><part><name index=\"1\"/><value>condition</value></part></template>\n\t50,\t\t\t<template><title>cc</title><part><name index=\"1\"/><value>radius</value></part></template>\n\t[[false]],\t\t<template><title>cc</title><part><name index=\"1\"/><value>unconscious</value></part></template>\n\t\"\",\t\t\t<template><title>cc</title><part><name index=\"1\"/><value>selection</value></part></template>\n\t\"\"\t\t\t<template><title>cc</title><part><name index=\"1\"/><value>memoryPoint</value></part></template>\n];&lt;/code&gt;\n\n</value></part><part><name index=\"6\"/><value> [[actionIDs]], [[actionParams]], [[setUserActionText]], [[inGameUISetEventHandler]], [[showHUD]], [[inputAction]]\n[[removeAction]], [[removeAllActions]], [[action]], [[BIS_fnc_holdActionAdd]]\n</value></part></template>\n\n&lt;dl class=\"command_description\"&gt;\n\n\n&lt;dd class=\"notedate\"&gt;Posted on May 02, 2018 - 13:44 (UTC)&lt;/dd&gt;\n&lt;dt class=\"note\"&gt;[[User:Dedmen|Dedmen]]&lt;/dt&gt;\n&lt;dd class=\"note\"&gt;\nIf you want to replicate vanilla Actions like \"Treat yourself\" where the scroll menu only shows text and it displays the icon mid-screen you can use\n&lt;code&gt;[[private]] _action = [[player]] [[addAction]] [\"Heal\", {}];\n[[player]] [[setUserActionText]] [_action , \"Heal\", \"&lt;img size='2' image='\\a3\\ui_f\\data\\IGUI\\Cfg\\Actions\\heal_ca'/&gt;\"];\n&lt;/code&gt;\n\n&lt;dd class=\"notedate\"&gt;Posted on May 12, 2020 - 10:42 (UTC)&lt;/dd&gt;\n&lt;dt class=\"note\"&gt;[[User:PierreMGI|PierreMGI]]&lt;/dt&gt;\n&lt;dd class=\"note\"&gt;\naddAction on unit or player stays on corpse after kill. So this action is lost for the new body after respawn. If you want a persistent addAction, you need to add it in the respawn script (onPlayerRespawn.sqf or addMissionEventHandler \"entityRespawned\" or addMPEventHandler \"MPrespawn\"...\nYou can use [[removeAllActions]] on corpse. \n\n&lt;/dl&gt;\n<comment>&lt;!-- Note Section END --&gt;</comment></root>"}}}